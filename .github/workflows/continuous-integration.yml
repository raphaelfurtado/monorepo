name: "[CI] Continuous Integration"

on:
  pull_request:
    types: [opened, synchronize]

# Variáveis  reutilizáveis do projeto
env: 
  NODE_VERSION: 20.18.0    

# Quais tarefas queremos executar?
jobs: 
  #tarefa
  lint: 
    runs-on: ubuntu-latest
    steps:
        # [Common CI/CD step]
        - uses: actions/checkout@v3
        - uses: actions/setup-node@v4
          with:
            node-version: ${{ env.NODE_VERSION }}
            cache: "npm"
            cache-dependency-path: ./package-lock.json
        # ===================
        - name: "Install Dependences"
          run: "npm ci --prefer-offline"
        - name: "Lint"
          run: "npm run lint"
  test:
    runs-on: ubuntu-latest
    steps:   
        # [Common CI/CD step]
        - uses: actions/checkout@v3
        - uses: actions/setup-node@v4
          with:
            node-version: ${{ env.NODE_VERSION }}
            cache: "npm"
            cache-dependency-path: ./package-lock.json
        # ===================
        - name: "Install Dependences"
          run: "npm ci --prefer-offline"
        - name: "Test"
          run: "npm run test"        